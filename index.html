<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>业务合规监控系统 - 最终定稿版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    
    <style>
        body {
            background-color: #f0f2f5;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        /* --- 滚动条样式 --- */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-track { background: transparent; }

        /* --- 级联选择器样式 --- */
        .cascader-input {
            border: 1px solid #d9d9d9;
            background-color: #fff;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            font-size: 13px;
        }
        .cascader-input:hover, .cascader-input.active {
            border-color: #4096ff;
            box-shadow: 0 0 0 2px rgba(5, 145, 255, 0.1);
        }
        .cascader-arrow {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            color: #bfbfbf;
            pointer-events: none;
            font-size: 10px;
        }
        .cascader-menus {
            position: absolute;
            top: 100%;
            left: 0;
            margin-top: 4px;
            background: #fff;
            border-radius: 4px;
            box-shadow: 0 3px 6px -4px rgba(0,0,0,.12), 0 6px 16px 0 rgba(0,0,0,.08), 0 9px 28px 8px rgba(0,0,0,.05);
            z-index: 100;
            display: none;
            flex-direction: row;
            border: 1px solid #f0f0f0;
        }
        .cascader-menus.show { display: flex; }
        .cascader-menu-col {
            min-width: 150px;
            max-height: 240px;
            overflow-y: auto;
            border-right: 1px solid #f0f0f0;
            padding: 4px 0;
        }
        .cascader-menu-col:last-child { border-right: none; }
        .cascader-item {
            padding: 6px 12px;
            cursor: pointer;
            font-size: 13px;
            color: rgba(0,0,0,0.88);
            display: flex;
            align-items: center;
            justify-content: space-between;
            white-space: nowrap;
        }
        .cascader-item:hover { background-color: #f5f5f5; }
        .cascader-item.active { background-color: #e6f4ff; font-weight: 600; color: #1677ff; }

        /* --- 分页按钮样式 --- */
        .pager-btn {
            width: 26px;
            height: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .pager-btn-default { background-color: #f5f5f5; color: #666; }
        .pager-btn-default:hover { background-color: #e0e0e0; }
        .pager-btn-active { background-color: #3b82f6; color: white; }

        /* --- 系统布局样式 --- */
        .sidebar-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #64748b;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .sidebar-item:hover { background-color: #f8fafc; color: #0f172a; }
        .sidebar-item.active {
            background-color: #eff6ff;
            color: #3b82f6;
            border-right: 3px solid #3b82f6;
        }
        .sidebar-sub-header {
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 500;
            color: #334155;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

    <aside class="w-64 bg-white border-r border-gray-200 flex flex-col z-20 flex-shrink-0">
        <div class="h-12 flex items-center px-6 bg-[#1890ff]">
            <div class="text-white font-bold text-lg tracking-wider">环卫收费平台</div>
        </div>
        
        <div class="flex-1 overflow-y-auto py-4">
            <div class="sidebar-item">工作台</div>
            <div class="sidebar-item">首页</div>
            
            <div class="sidebar-sub-header text-gray-400 mt-2">
                <span>收费管理</span>
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
             <div class="sidebar-sub-header text-gray-400">
                <span>配置管理</span>
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>

            <div class="sidebar-sub-header">
                <span>统计报表</span>
                <svg class="w-3 h-3 transform rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
            <div class="bg-gray-50/50">
                <div class="sidebar-item pl-8">自动划扣统计分析</div>
                <div class="sidebar-item pl-8">逾期分析</div>
                <div class="sidebar-item pl-8">收款分析表</div>
                <div class="sidebar-item pl-8">收款统计表</div>
                <div class="sidebar-item pl-8 active">业务合规监控</div>
            </div>
            
            <div class="sidebar-sub-header text-gray-400 mt-2">
                <span>权限管理</span>
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
        </div>
    </aside>

    <div class="flex-1 flex flex-col min-w-0 bg-[#f0f2f5]">
        
        <header class="h-12 bg-[#1890ff] shadow-sm flex-shrink-0"></header>

        <main class="flex-1 overflow-y-auto p-4 space-y-4">
            
            <div class="bg-white rounded-lg shadow-sm w-full h-[500px] flex flex-col">
                <div class="px-6 py-3 border-b border-gray-100 flex-shrink-0">
                    <h3 class="text-base font-bold text-gray-800 border-l-4 border-blue-500 pl-3">地址业务统计</h3>
                </div>
                
                <div class="flex-1 grid grid-cols-3 min-h-0 divide-x divide-gray-100">
                    <div class="p-4 flex flex-col">
                        <div class="flex items-center mb-2 flex-shrink-0 z-20 space-x-4">
                            <div class="flex items-center">
                                <span class="text-gray-600 font-medium text-xs mr-2">地区</span>
                                <div class="relative w-28" id="cascader-top-1">
                                    <div class="cascader-input px-3 py-1.5 truncate pr-6" id="input-top-1">全区</div>
                                    <span class="cascader-arrow">▼</span>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <span class="text-gray-600 font-medium text-xs mr-2">年份:</span>
                                <div class="flex items-center border border-gray-300 rounded px-2 py-1.5 bg-white hover:border-blue-400 cursor-pointer transition-colors w-24">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-gray-400 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                    <span class="text-xs text-gray-700">2026</span>
                                </div>
                            </div>
                        </div>
                        <div id="chartTopLeft" class="flex-1 w-full min-h-0 z-0"></div>
                    </div>

                    <div class="p-4 flex flex-col min-h-0">
                        <div class="flex items-center mb-4 flex-shrink-0 z-20 space-x-4">
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-600 font-medium text-xs">地区</span>
                                <div class="relative w-28" id="cascader-top-2">
                                    <div class="cascader-input px-3 py-1.5 truncate pr-6" id="input-top-2">全区</div>
                                    <span class="cascader-arrow">▼</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-600 font-medium text-xs">日期</span>
                                <div class="border border-gray-300 rounded px-2 py-1.5 bg-white w-32 text-xs text-gray-700 flex items-center cursor-pointer">
                                    <svg class="h-3.5 w-3.5 text-gray-400 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                    <span class="truncate">2026-01-01</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex-1 flex flex-col border border-gray-200 rounded overflow-hidden min-h-0 z-0">
                            <div class="grid grid-cols-4 bg-gray-50 border-b border-gray-200 py-2.5 text-xs font-bold text-gray-700 text-center flex-shrink-0">
                                <div class="text-left pl-4">地区名称</div>
                                <div>底数数量</div>
                                <div>无标准地址数量</div>
                                <div>无标准地址率</div>
                            </div>
                            <div class="flex-1 overflow-y-auto" id="streetList1"></div>
                        </div>
                    </div>

                    <div class="p-4 flex flex-col min-h-0">
                        <div class="flex items-center mb-4 flex-shrink-0 z-20 space-x-4">
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-600 font-medium text-xs">地区</span>
                                <div class="relative w-28" id="cascader-top-3">
                                    <div class="cascader-input px-3 py-1.5 truncate pr-6" id="input-top-3">全区</div>
                                    <span class="cascader-arrow">▼</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-600 font-medium text-xs">日期</span>
                                <div class="border border-gray-300 rounded px-2 py-1.5 bg-white w-32 text-xs text-gray-700 flex items-center cursor-pointer">
                                    <svg class="h-3.5 w-3.5 text-gray-400 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                    <span class="truncate">2026-01-01</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex-1 flex flex-col border border-gray-200 rounded overflow-hidden min-h-0 z-0">
                            <div class="grid grid-cols-2 bg-gray-50 border-b border-gray-200 py-2.5 px-4 text-xs font-bold text-gray-700 text-center flex-shrink-0">
                                <div>登记人员姓名</div>
                                <div>无标准地址登记量</div>
                            </div>
                            <div class="flex-1 overflow-y-auto" id="personList1"></div>
                        </div>
                        <div class="flex items-center justify-between mt-2 flex-shrink-0 text-xs text-gray-600 select-none">
                            <div class="flex items-center space-x-2">
                                <span>共 31 条</span>
                                <div class="relative">
                                    <select class="appearance-none border border-gray-300 rounded px-2 py-0.5 pr-6 bg-white text-xs text-gray-600 focus:outline-none focus:border-blue-400 cursor-pointer">
                                        <option>10条/页</option>
                                        <option>20条/页</option>
                                    </select>
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-gray-400">
                                        <svg class="fill-current h-3 w-3" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-1.5">
                                <div class="pager-btn pager-btn-default bg-gray-100 text-gray-400">
                                    <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                                </div>
                                <div class="pager-btn pager-btn-active">1</div>
                                <div class="pager-btn pager-btn-default">2</div>
                                <div class="pager-btn pager-btn-default">3</div>
                                <div class="pager-btn pager-btn-default"><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg></div>
                                <div class="flex items-center ml-2 text-xs">
                                    <span class="mr-1">前往</span>
                                    <input type="text" value="1" class="w-8 py-0.5 border border-gray-300 rounded text-center focus:outline-none focus:border-blue-400">
                                    <span class="ml-1">页</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-sm w-full h-[500px] flex flex-col">
                <div class="px-6 py-3 border-b border-gray-100 flex-shrink-0">
                    <h3 class="text-base font-bold text-gray-800 border-l-4 border-green-500 pl-3">免征地址统计</h3>
                </div>
                
                <div class="flex-1 grid grid-cols-3 min-h-0 divide-x divide-gray-100">
                    <div class="p-4 flex flex-col">
                        <div class="flex items-center mb-2 flex-shrink-0 z-20 space-x-4">
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-600 font-medium text-xs">地区</span>
                                <div class="relative w-28" id="cascader-bottom-1">
                                    <div class="cascader-input px-3 py-1.5 truncate pr-6" id="input-bottom-1">全区</div>
                                    <span class="cascader-arrow">▼</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-600 font-medium text-xs">免征时间</span>
                                <div class="border border-gray-300 rounded px-2 py-1.5 bg-white w-40 text-xs text-gray-700 flex items-center">
                                    <svg class="h-3.5 w-3.5 text-gray-400 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                    <span class="truncate">2026-01-01 至 12-31</span>
                                </div>
                            </div>
                        </div>
                        <div id="pieChart2" class="flex-1 w-full min-h-0 z-0"></div>
                    </div>

                    <div class="p-4 flex flex-col min-h-0">
                        <div class="flex items-center mb-4 flex-shrink-0 z-20 space-x-4">
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-600 font-medium text-xs">地区</span>
                                <div class="relative w-28" id="cascader-bottom-2">
                                    <div class="cascader-input px-3 py-1.5 truncate pr-6" id="input-bottom-2">全区</div>
                                    <span class="cascader-arrow">▼</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-600 font-medium text-xs">免征时间</span>
                                <div class="border border-gray-300 rounded px-2 py-1.5 bg-white w-40 text-xs text-gray-700 flex items-center">
                                    <svg class="h-3.5 w-3.5 text-gray-400 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                    <span class="truncate">2026-01-01 至 12-31</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex-1 flex flex-col border border-gray-200 rounded overflow-hidden min-h-0 z-0">
                            <div class="grid grid-cols-2 bg-gray-50 border-b border-gray-200 py-2.5 px-4 text-xs font-bold text-gray-700 text-center flex-shrink-0">
                                <div>名称</div>
                                <div>免征地址数量</div>
                            </div>
                            <div class="flex-1 overflow-y-auto" id="streetList2"></div>
                        </div>
                    </div>

                    <div class="p-4 flex flex-col min-h-0">
                        <div class="flex items-center mb-4 flex-shrink-0 z-20 space-x-4">
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-600 font-medium text-xs">地区</span>
                                <div class="relative w-28" id="cascader-bottom-3">
                                    <div class="cascader-input px-3 py-1.5 truncate pr-6" id="input-bottom-3">全区</div>
                                    <span class="cascader-arrow">▼</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-gray-600 font-medium text-xs">免征时间</span>
                                <div class="border border-gray-300 rounded px-2 py-1.5 bg-white w-40 text-xs text-gray-700 flex items-center">
                                    <svg class="h-3.5 w-3.5 text-gray-400 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                    <span class="truncate">2026-01-01 至 12-31</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex-1 flex flex-col border border-gray-200 rounded overflow-hidden min-h-0 z-0">
                            <div class="grid grid-cols-2 bg-gray-50 border-b border-gray-200 py-2.5 px-4 text-xs font-bold text-gray-700 text-center flex-shrink-0">
                                <div>登记人员姓名</div>
                                <div>登记免征地址数量</div>
                            </div>
                            <div class="flex-1 overflow-y-auto" id="personList2"></div>
                        </div>
                        <div class="flex items-center justify-between mt-2 flex-shrink-0 text-xs text-gray-600 select-none">
                            <div class="flex items-center space-x-2">
                                <span>共 31 条</span>
                                <div class="relative">
                                    <select class="appearance-none border border-gray-300 rounded px-2 py-0.5 pr-6 bg-white text-xs text-gray-600 focus:outline-none focus:border-blue-400 cursor-pointer">
                                        <option>10条/页</option>
                                        <option>20条/页</option>
                                    </select>
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-gray-400">
                                        <svg class="fill-current h-3 w-3" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-1.5">
                                <div class="pager-btn pager-btn-default bg-gray-100 text-gray-400">
                                    <svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                                </div>
                                <div class="pager-btn pager-btn-active">1</div>
                                <div class="pager-btn pager-btn-default">2</div>
                                <div class="pager-btn pager-btn-default">3</div>
                                <div class="pager-btn pager-btn-default"><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg></div>
                                <div class="flex items-center ml-2 text-xs">
                                    <span class="mr-1">前往</span>
                                    <input type="text" value="1" class="w-8 py-0.5 border border-gray-300 rounded text-center focus:outline-none focus:border-blue-400">
                                    <span class="ml-1">页</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="h-4"></div>
        </main>
    </div>

<script>
    // --- 数据源 (白云区) ---
    const streets = [
        { id: '1', name: '松洲街道', communities: [{id: '1-1', name: '槎龙社区'}, {id: '1-2', name: '螺涌社区'}] },
        { id: '2', name: '景泰街道', communities: [{id: '2-1', name: '景泰西社区'}, {id: '2-2', name: '云苑南社区'}] },
        { id: '3', name: '同德街道', communities: [{id: '3-1', name: '同德社区'}, {id: '3-2', name: '横沙社区'}] },
        { id: '4', name: '三元里街道', communities: [{id: '4-1', name: '三元里社区'}, {id: '4-2', name: '松柏岗社区'}] },
        { id: '5', name: '黄石街道', communities: [{id: '5-1', name: '黄石花园社区'}, {id: '5-2', name: '江夏社区'}] }
    ];

    // --- 统一的三级级联逻辑 ---
    function initCascader(containerId, config) {
        const container = document.getElementById(containerId);
        const input = container.querySelector('.cascader-input');
        const menuContainer = document.createElement('div');
        menuContainer.className = 'cascader-menus';
        container.appendChild(menuContainer);

        function renderColumn(items, level) {
            while (menuContainer.children.length > level) menuContainer.removeChild(menuContainer.lastChild);
            const colDiv = document.createElement('div');
            colDiv.className = 'cascader-menu-col';
            items.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'cascader-item';
                itemDiv.innerHTML = `<span>${item.label}</span>${item.hasChildren ? '<span class="cascader-arrow">></span>' : ''}`;
                
                itemDiv.addEventListener('mouseenter', () => {
                    Array.from(colDiv.children).forEach(c => c.classList.remove('active'));
                    itemDiv.classList.add('active');
                    if (item.hasChildren) {
                        const children = config.loadChildren(item.value);
                        if (children && children.length > 0) renderColumn(children, level + 1);
                    } else while (menuContainer.children.length > level + 1) menuContainer.removeChild(menuContainer.lastChild);
                });
                
                itemDiv.addEventListener('click', (e) => {
                    e.stopPropagation();
                    if (!item.hasChildren) {
                        input.innerText = item.label;
                        input.classList.remove('text-gray-400');
                        closeMenu();
                        if (config.onSelect) config.onSelect(item.label, item.value);
                    }
                });
                colDiv.appendChild(itemDiv);
            });
            menuContainer.appendChild(colDiv);
        }
        function openMenu() {
            menuContainer.classList.add('show');
            input.classList.add('active');
            renderColumn(config.rootItems, 0);
        }
        function closeMenu() {
            menuContainer.classList.remove('show');
            input.classList.remove('active');
        }
        input.addEventListener('click', (e) => {
            e.stopPropagation();
            if (menuContainer.classList.contains('show')) closeMenu();
            else {
                document.querySelectorAll('.cascader-menus.show').forEach(el => el.classList.remove('show'));
                openMenu();
            }
        });
        document.addEventListener('click', (e) => { if (!container.contains(e.target)) closeMenu(); });
    }

    // --- 统一的加载子节点逻辑 ---
    const commonLoadChildren = (val) => {
        if (val === 'root_town') {
            return streets.map(s => ({ label: s.name, value: 't_' + s.id, hasChildren: false }));
        }
        if (val === 'root_village') {
            return streets.map(s => ({ label: s.name, value: 'v_' + s.id, hasChildren: true }));
        }
        if (val.startsWith('v_')) {
            const streetId = val.substring(2);
            const street = streets.find(s => s.id === streetId);
            return street ? street.communities.map(c => ({ label: c.name, value: c.id, hasChildren: false })) : [];
        }
        return [];
    };

    const commonRootItems = [
        {label: '全区', value: 'all', hasChildren: false},
        {label: '镇街', value: 'root_town', hasChildren: true},
        {label: '村民委员会/经济联社/社区', value: 'root_village', hasChildren: true}
    ];

    // ==========================================
    // TOP MODULE
    // ==========================================
    
    var chartTopLeft = echarts.init(document.getElementById('chartTopLeft'));
    chartTopLeft.setOption({
        tooltip: { trigger: 'axis' },
        grid: { top: '15%', left: '3%', right: '4%', bottom: '3%', containLabel: true },
        xAxis: { type: 'category', boundaryGap: false, data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'], axisLine: { lineStyle: { color: '#e5e7eb' } }, axisLabel: { color: '#6b7280', fontSize: 10 } },
        yAxis: { type: 'value', axisLine: { show: false }, axisTick: { show: false }, splitLine: { lineStyle: { color: '#f3f4f6', type: 'dashed' } }, axisLabel: { color: '#6b7280', fontSize: 10 } },
        series: [{ name: '无标准地址数量', type: 'line', smooth: true, symbol: 'none', lineStyle: { width: 3, color: '#3b82f6' }, areaStyle: { color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{ offset: 0, color: 'rgba(59, 130, 246, 0.3)' }, { offset: 1, color: 'rgba(59, 130, 246, 0.01)' }]) }, data: [120, 132, 101, 134, 90, 230, 210, 180, 150, 200, 160, 130] }]
    });

    initCascader('cascader-top-1', { rootItems: commonRootItems, loadChildren: commonLoadChildren });

    initCascader('cascader-top-2', { rootItems: commonRootItems, loadChildren: commonLoadChildren, onSelect: () => renderStreetList1() });
    function renderStreetList1() {
        const list = document.getElementById('streetList1');
        const data = [
            { name: '松洲街道', total: 47934, badCount: 14452, rate: 30.15 },
            { name: '同德街道', total: 18394, badCount: 3636, rate: 19.77 },
            { name: '同和街道', total: 17692, badCount: 3363, rate: 19.01 },
            { name: '三元里街', total: 4176, badCount: 187, rate: 4.49 },
            { name: '景泰街道', total: 3200, badCount: 102, rate: 3.21 },
            { name: '黄石街道', total: 2100, badCount: 45, rate: 2.15 },
            { name: '棠景街道', total: 1800, badCount: 35, rate: 1.95 },
            { name: '新市街道', total: 1500, badCount: 22, rate: 1.50 }
        ];
        list.innerHTML = data.map((item, i) => `
            <div class="grid grid-cols-4 py-2.5 border-b border-gray-100 ${i%2?'bg-white':'bg-gray-50'} text-center items-center text-xs">
                <div class="text-left pl-4 font-medium text-gray-800">${item.name}</div>
                <div class="text-gray-600">${item.total}</div>
                <div class="text-gray-800 font-medium">${item.badCount}</div>
                <div class="text-gray-800">${item.rate}%</div>
            </div>`).join('');
    }
    renderStreetList1();

    initCascader('cascader-top-3', { rootItems: commonRootItems, loadChildren: commonLoadChildren, onSelect: () => renderPersonList1() });
    // 加载时立即渲染10条数据(恢复分页默认值)
    renderPersonList1();
    function renderPersonList1() {
        const container = document.getElementById('personList1');
        let data = Array.from({length:10}).map((_,i)=>({name:['张伟','李强','王芳','陈杰'][i%4]+(i+1), count:Math.floor(Math.random()*500)+10}));
        data.sort((a,b)=>b.count-a.count);
        container.innerHTML = data.map((item, i) => `
            <div class="grid grid-cols-2 py-2.5 px-4 border-b border-gray-100 ${i%2?'bg-white':'bg-gray-50'} text-center items-center text-xs">
                <span class="text-gray-800">${item.name}</span>
                <span class="font-semibold text-gray-800">${item.count}</span>
            </div>`).join('');
    }


    // ==========================================
    // BOTTOM MODULE
    // ==========================================
    
    var myChart2 = echarts.init(document.getElementById('pieChart2'));
    myChart2.setOption({
        color: ['#498bf9', '#57cd67', '#f14747', '#facc15'],
        tooltip: { trigger: 'item', formatter: '{b}: {c} ({d}%)' },
        legend: { bottom: '0%', left: 'center', icon: 'roundRect', itemGap: 8, itemWidth: 10, itemHeight: 10, textStyle: {fontSize: 10} },
        series: [{ type: 'pie', radius: ['35%', '55%'], center: ['50%', '40%'], label: { show: true, formatter: '{c} ({d}%)', color: '#333', fontSize: 10 }, labelLine: { length: 5, length2: 5 }, data: [{value:450,name:'临时施工'},{value:240,name:'空置房产'},{value:180,name:'停产企业'},{value:80,name:'其他'}] }]
    });
    
    initCascader('cascader-bottom-1', { rootItems: commonRootItems, loadChildren: commonLoadChildren });
    initCascader('cascader-bottom-2', { rootItems: commonRootItems, loadChildren: commonLoadChildren, onSelect: () => renderStreetList2() });
    initCascader('cascader-bottom-3', { rootItems: commonRootItems, loadChildren: commonLoadChildren, onSelect: () => renderPersonList2() });

    function renderStreetList2() {
        const list = document.getElementById('streetList2');
        const data = [
            {name: '松洲街道', v: 47934}, {name: '同德街道', v: 18394}, {name: '同和街道', v: 17692}, 
            {name: '景泰街道', v: 14166}, {name: '黄石街道', v: 12394}, {name: '三元里街', v: 11200},
            {name: '棠景街道', v: 9800}, {name: '新市街道', v: 8500}
        ];
        list.innerHTML = data.map((item, i) => `
            <div class="grid grid-cols-2 py-2.5 px-4 border-b border-gray-100 ${i%2?'bg-white':'bg-gray-50'} text-center items-center text-xs">
                <span class="text-gray-800 font-medium">${item.name}</span>
                <span class="font-semibold">${item.v}</span>
            </div>`).join('');
    }
    renderStreetList2();

    // 加载时立即渲染10条数据(恢复分页默认值)
    renderPersonList2();
    function renderPersonList2() {
        const container = document.getElementById('personList2');
        let data = Array.from({length:10}).map((_,i)=>({name:['刘敏','赵强','孙丽','周明'][i%4]+(i+1), count:Math.floor(Math.random()*500)+10}));
        data.sort((a,b)=>b.count-a.count);
        container.innerHTML = data.map((item, i) => `
            <div class="grid grid-cols-2 py-2.5 px-4 border-b border-gray-100 ${i%2?'bg-white':'bg-gray-50'} text-center items-center text-xs">
                <span class="text-gray-800">${item.name}</span>
                <span class="font-semibold">${item.count}</span>
            </div>`).join('');
    }

    window.addEventListener('resize', () => { chartTopLeft.resize(); myChart2.resize(); });

</script>
</body>
</html>